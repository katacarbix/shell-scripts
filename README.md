# shell scripts

This repo was extracted from [my dotfiles repo](https://github.com/katacarbix/dotfiles) for better discoverability.

*Symlinked as \~/scripts and included in $PATH*

All of the scripts in this repo were either written by me or borrowed from someone else and modified for my use case. I don't want to reupload unmodified scripts, so for those, check out [this section](https://github.com/katacarbix/dotfiles#programs-you-should-know-about-that-werent-mentioned-elsewhere) of my dotfiles readme.

### battery-notify ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
*by [beatle on archlinux forums](https://bbs.archlinux.org/viewtopic.php?pid=1037160#p1037160)*  
Runs in the background and warns me when my laptop battery gets too low.

### colors.py ![Language: Python3](https://img.shields.io/badge/Language-Python3-357bb3?style=flat)
Custom visualizations of terminal colors. I'm sure there are better implementations out there but this was fun to make.

### davsync ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Synchronizes calendars and contacts from my CalDAV/CardDAV server with [`vdirsyncer`](https://github.com/pimutils/vdirsyncer) and updates [`khal`](https://github.com/pimutils/khal).

### kitty-popup ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Create terminal script popup windows using kitty's remote control and i3-msg to manipulate the window.

### lightswitch ![Language: Javascript](https://img.shields.io/badge/Language-Javascript-68a063?style=flat)
Tells certain programs to switch to light or dark mode depending on a command line argument.

### lock ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Runs [`i3lock-color`](https://github.com/Raymo111/i3lock-color) using colors from wal to save lines of code elsewhere. It assumes there is a backdrop image located at `/tmp/i3lock_bg.png`, which should be generated by the `pywal` script.

### minecraft ![Language: Javascript](https://img.shields.io/badge/Language-Javascript-68a063?style=flat)
Pings a Minecraft server to see who is online. Made to be used with Polybar.

### mk-itch-shortcut ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Creates an application shortcut given an itch.io game folder so you can access it from your app launcher or add it to Steam.

### rgbctl.py ![Language: Python3](https://img.shields.io/badge/Language-Python3-357bb3?style=flat)
Sets the colors of physical devices with RGB in my setup. Right now it only sets the colors of the keyboard on my Razer Blade. It has the ability to set the Yeelight bulbs over my local network but I turned that off because it hurts my eyes ðŸ˜µ.

### screech ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Swiss army knife screenshotting tool. It wraps around `maim` (X11) and `grim` (wayland, untested) for taking the screenshots themselves, and a few other small programs for various tasks like selecting an area of the screen. It's designed to have concise and easy-to-remember commands.

### screensaver ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Terminal-based desktop screensaver program.

### update ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Update system-wide packages from different package managers in parallel. Uses `rofi/askpass` when not run from a terminal.

### wal.py ![Language: Python3](https://img.shields.io/badge/Language-Python3-357bb3?style=flat)
Grabs a random wallpaper (or reads a path from `argv`), sets it and loads a color scheme with wal, then tells everything to update its color scheme (either directly or through [lightswitch](#lightswitch)). Supports light and dark mode, and has an automatic option that uses the angle of the sun.

## rofi
Scripts that use rofi as their UI.

### askpass ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
*by [ivanbartsov](https://github.com/davatorium/rofi/issues/584#issuecomment-384555551)*  
Gives scripts a way to prompt for passwords without a terminal. Prepend commands with `SUDO_ASKPASS=/path/to/rofi/askpass sudo -A` (or add the first part to `.profile`/`.bashrc`) to use.

### displayout ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
Menu for switching between monitor setups. The xrandr commands were generated by [ARandR](https://christian.amsuess.com/tools/arandr/)

### power ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
*by [tostiheld](https://github.com/tostiheld/dotfiles/blob/master/bin/power-menu.sh)*  
Menu for shutting down, logging out, etc.

### tweet ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
A wrapper around [tweet.sh](https://github.com/piroor/tweet.sh) so I can post tweets without having to open Twitter (or a terminal).

### usb ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)
*by [luyves](https://github.com/luyves/polybar-rofi-usb-mount)*  
USB device manager and client for `udisks2`.

### wiktionary ![Language: Python3](https://img.shields.io/badge/Language-Python3-357bb3?style=flat)
Look up definitions from Wiktionary. You can set the language as well.

## Backups
**Disclaimer!** The backup script is kind of a mess right now. Once I have a working backup workflow again I'll update it and remove this warning.

I made a few files for managing backups:
- [`backup`](backup) ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat) - The main script. It can start and stop backups, and it will keep running until it's done. It's basically just a wrapper for [restic](https://restic.net/) with special features like notifications, logging, and a single-instance lock.
- [`backupctl`](rofi/backupctl) ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat) - A rofi menu where you can start or stop a backup in the background and view the log file without having to do it manually in a terminal.
- [`backup-status`](https://github.com/katacarbix/dotfiles/blob/main/polybar/scripts/backup-status) ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat) - An indicator for polybar that shows if a backup is running, finished, failed, or out of date. It might need some modification to work with other status bars. Here's an example config entry for polybar:
  ```ini
  [module/backup]
  type = custom/script
  exec = ~/.config/polybar/scripts/backup-status
  tail = true ; Only show last line of output
  click-left = ~/scripts/rofi/backupctl
  ```
- [`backup/`](https://github.com/katacarbix/dotfiles/blob/main/backup) - Contains a [config](https://github.com/katacarbix/dotfiles/blob/main/backup/config) file and a [list](https://github.com/katacarbix/dotfiles/blob/main/backup/excludelist) of patterns to exclude. Make sure to edit these before running the script.

### Why?
For a while I'd been looking for a simple backup solution for Linux that also felt seamless and integrated into the desktop but I couldn't find one which suited my needs. I originally made this script to work with rsync but I wanted snapshots, which restic can do. I love how simple it is but I got tired of typing the entire command each time (or scrolling through my term history for it) so I wrote these to make things easier for me.

### Shortcomings
I didn't include the ability to create multiple backups or schedule them, but I don't think it would be hard to add those features. It's also highly tailored to my needs and setup which means you might need to convert some of the code if you use different programs than me.

# Graveyard

Scripts I've stopped using in favor of solutions. Links go to the file at the last commit it existed in.

### [gcal-repl ![Language: Fish](https://img.shields.io/badge/Language-Fish-d3242b?style=flat)](https://github.com/reeseovine/shell-scripts/blob/e3c7d5f07ffd501b990d9756f6776f3c08404e94/gcal-repl)
A wrapper around [`gcalcli`](https://github.com/insanum/gcalcli) which turns it into a REPL (read-eval-print loop) rather than having to enter the full command every time. This gets wrapped with `kitty-popup` by polybar when I click the date/time widget for easy access.

### [pywal ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)](https://github.com/reeseovine/shell-scripts/blob/e3c7d5f07ffd501b990d9756f6776f3c08404e94/pywal)
My original bash version of [wal.py](#wal.py-). Grabs a random wallpaper (or reads a path from `argv`), sets it and loads a color scheme with wal, then tells everything to update its color scheme (either directly or through another script). Supports light and dark mode, and has an automatic option that uses `redshift` to get the angle of the sun.

### [rebar ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)](https://github.com/reeseovine/shell-scripts/blob/e3c7d5f07ffd501b990d9756f6776f3c08404e94/rebar)
(Re)starts polybar. It detects primary and secondary displays and puts the correct bar on each.

### [startup-apps ![Language: Bash](https://img.shields.io/badge/Language-Bash-3e474a?style=flat)](https://github.com/reeseovine/shell-scripts/blob/e3c7d5f07ffd501b990d9756f6776f3c08404e94/startup-apps)
Uses i3's `append_layout` feature to restore layouts and open programs upon login so I don't have to waste my time doing it manually.
